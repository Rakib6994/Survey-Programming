<checkbox
  label="Top3"
  where="execute,survey,report">
  <title>Top3 retailers based on the percentages.</title>
  <exec>
val1  = 0
val2  = 0
val3  = 0
val4  = 0
val5  = 0
val6  = 0
val7  = 0
val8  = 0
val9  = 0
val10 = 0
val11 = 0
val12 = 0
val13 = 0
val14 = 0
val15 = 0
val16 = 0
val17 = 0
val18 = 0


if A3.r1:  val1 =  A3.r1.val
if A3.r2:  val2 =  A3.r2.val
if A3.r3:  val3 =  A3.r3.val
if A3.r4:  val4 =  A3.r4.val
if A3.r5:  val5 =  A3.r5.val
if A3.r6:  val6 =  A3.r6.val
if A3.r7:  val7 =  A3.r7.val
if A3.r8:  val8 =  A3.r8.val
if A3.r9:  val9 =  A3.r9.val
if A3.r10: val10 = A3.r10.val
if A3.r11: val11 = A3.r11.val
if A3.r12: val12 = A3.r12.val
if A3.r13: val13 = A3.r13.val
if A3.r14: val14 = A3.r14.val
if A3.r15: val15 = A3.r15.val
if A3.r16: val16 = A3.r16.val
if A3.r17: val17 = A3.r17.val
if A3.r18: val18 = A3.r18.val

arr1 = [val1,val2,val3,val4,val5,val6,val7,val8,val9,val10,val11,val12,val13,val14,val15,val16,val17,val18]

arr1.sort(reverse=True)

flag = [0,0,0]

for x in range(3):
  for y in A3.rows:
     if (not(Top3[y]) and flag[x] == 0 and A3[y].val == arr1[x]):
        Top3[y].val = 1
        flag[x] = 1
      
</exec>
  <row label="r1">PAK'n SAVE</row>
  <row label="r2">New World</row>
  <row label="r3">Countdown/ Woolworths</row>
  <row label="r4">Four Square</row>
  <row label="r5">Fresh Choice</row>
  <row label="r6">SuperValue</row>
  <row label="r7">The Warehouse</row>
  <row label="r8">Pharmacy (Chemist Warehouse, Bargain Chemist, independent pharmacies)</row>
  <row label="r9">Costco</row>
  <row label="r10">Liquorland</row>
  <row label="r11">Independent liquor stores</row>
  <row label="r12">Asian / Chinese supermarkets (Kosco, Tai Ping, Dahua, Wang's, Japan Mart, T-Mart, etc.)</row>
  <row label="r13">Dairy / convenience stores</row>
  <row label="r14">Fruits and vegetables stores</row>
  <row label="r15">Independent bakery stores</row>
  <row label="r16">Petrol service stations</row>
  <row label="r17">Butchers</row>
  <row label="r18" >Other not mentioned above</row>
</checkbox>
<suspend/>
